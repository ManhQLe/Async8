var Async8={Queue:function(a,b,d,c){function e(b,c){c?d(c):f<a.length?a[f++](e,b,c):d(b)}var f=0;d?1:d=function(){};c?setTimeout(e,0,b):e(b)},PQueue:function(a,b,d){d?1:d=function(){};var c=[],e=0,f=!1;a.forEach(function(a,k){c.push(null);setTimeout(a,0,function(a,b){c[k]=a;b&&!f?(f=!0,d(c,b,k)):++e==c.length?d(c):1},b,k)})},DPQueue:function(a,b,d,c){c=c?c:a.length;for(var e=[],f=0;f<c;f++)e.push(b);this.PQueue(e,a,d)},MA:function(a){return new Async8._.MA(a)},N0:function(a,b,d,c){this.Name=a;this.fx=
b;this.Props=d;this.Async=c;this.InputCount=0;this.Params={};this.Collected=0;this.Link2=[];this.Board=null},_:{MA:function(a){this.Nodes=[];var b=this;a.forEach(function(a,c){for(var e=0;e<a.length;e+=2){var f=b.GetNode(a[e]),h=e+1;if(h<a.length){var k=a[h],h=b.GetNode(a[h+1]);h.InputCount++;f.Link2.push({Local:k,Node:h})}}});this.Leaves=this.Leafed=0;this.LastParams={};this.Nodes.forEach(function(a){a.Link2.length?1:b.Leaves++})}}};
Async8.N0.prototype.Fire=function(a,b){this.Async?setImmediate(this.fx,this,a,b,this.Board):this.fx(a,b,this.Board)};
Async8._.MA.prototype.GetNode=function(a){var b={};switch(typeof a){case "object":b=a;break;case "function":b.Name=a.name||Async8._.MA.Config.GetName();b.fx=a;break;default:b.Name=a}var d,c=this.Nodes.every(function(a,c){d=c;return a.Name!==b.Name});if(c&&!b.fx)throw"Undeclared node name: "+a;c?(b=Async8._.MA.DESC(b.Name,b.fx,b.Props,b.Async),b.Board=this,this.Nodes.push(b)):b=this.Nodes[d];return b};
Async8._.MA.prototype.ExecNode=function(a,b,d){function c(b,c,d){if(c)e.Error=c,e.Endfx(null,c);else{var m=MA.FX.GetFlows(d),l,g;a.Link2.forEach(function(a){g=a.Node;l=m(g,d);0<l&&(++g.Collected,l--,a.Local?g.Params[a.Local]=b:g.Params=b);e.ExecNode(g,g.Params,l)});a.Link2.length?1:(e.LastParams[a.Name]=b,++e.Leafed==e.Leaves?(e.Leafed=0,e.Endfx(e.LastParams)):1)}}var e=this;!e.Error&&(d?d:0)+a.Collected>=a.InputCount&&(a.Collected=0,a.Fire(c,b))};
Async8._.MA.prototype.Fire=function(a,b,d,c){this.Global=c;this.LastParams={};d?this.Endfx=d:1;var e=this;this.Nodes.forEach(function(c){if(b&&0<=b.indexOf(c.Name)||0==c.InputCount){var d=a.hasOwnProperty(c.Name)?a[c.Name]:{};c.Params=d;e.ExecNode(c,c.Params,c.InputCount)}})};Async8._.MA.Config={i:0,GetName:function(){return"Annonymous"+this.i++}};
Async8._.MA.Flows={Default:function(a,b){return 1},ChooseCurrent:function(a,b){return b.hasOwnProperty(a.Name)?b[a.Name]:0},FireBoost:function(a,b){return 0<=b.indexOf(a.Name)?a.InputCount:1}};Async8._.MA.FX={GetFlows:function(a){return a?Array.isArray(a)?Async8._.MA.Flows.FireBoost:a.call?a:Async8._.MA.Flows.ChooseCurrent:Async8._.MA.Flows.Default}};Async8._.MA.DESC=function(a,b,d,c){return new Async8.N0(a,b,d,c)};Async8.DESC=Async8._.MA.DESC;
